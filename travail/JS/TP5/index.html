<!DOCTYPE html>
<html lang="fr">

<head>

    <meta charset="utf-8">

    <!-- 
            https://planning.univ-rennes1.fr/jsp/custom/modules/plannings/9EYlGR3a.shu
        -->

    <!-- 
            https://cors-anywhere.herokuapp.com/
        -->

    <title>Service Worker</title>

</head>

<body>

    <script type="text/javascript">
        window.addEventListener('load', () => {
            registerSW();
            fetch('https://cors-anywhere.herokuapp.com/' + 'https://planning.univ-rennes1.fr/jsp/custom/modules/plannings/9EYlGR3a.shu').then(
                function(response) {
                    return response.text();
                }).then(function(data) {
                console.log(data);
            });
        });

        async function registerSW() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('tp/tpJS_5/sw.js').then(function(reg) {
                    if (reg.installing) {
                        console.log('Service worker installing');
                    } else if (reg.waiting) {
                        console.log('Service worker installed');
                    } else if (reg.active) {
                        console.log('Service worker active');
                    }
                }).catch(function(error) {
                    console.log('Registration failed with ' + error);
                });
            }
        }

        /*
        faireQqc().then(function(result) {
            return faireAutreChose(result);
        })
        .then(function(newResult) {
            return faireUnTroisiemeTruc(newResult);
        })
        .then(function(finalResult) {
            console.log('Résultat final : ' + finalResult);
        })
        .catch(failureCallback);
        */

        /*
        faireQqc()
        .then(result => faireAutreChose(result))
        .then(newResult => faireUnTroisiemeTruc(newResult))
        .then(finalResult => {
            console.log('Résultat final : ' + finalResult);
        })
        .catch(failureCallback);
        */
    </script>

</body>

</html>